## 第11章 守护进程集

1. 守护进程就可以实现将Pod复制到每个节点上，确保Pod的副本在Kubernetes集群的一组节点上运行。
2. 如果你的应用程序与节点完全解耦，而且可以在给定节点上运行多个副本，根本无需考虑，则应该使用副本集。如果集群的所有节点或部分节点都必须运行应用程序的一个副本，则应该使用守护进程集。
3. 在默认情况下，守护进程集会在每个节点上创建Pod的副本。如果你使用节点选择器，那么就只有匹配标签集合的节点才会成为守护进程集的操作对象。在创建Pod时，守护进程集会通过Pod规范中的nodeName字段来决定Pod应该在哪个节点上运行。这样，Kubernetes调度器就会忽略由守护进程集创建的Pod。
4. 在同一个Kubernetes命名空间中，守护进程集的名称必须唯一。
5. kubectl label nodes将所需的标签集添加到部分节点上。就像Kubernetes的其他资源一样，如果不使用标签选择器，则节点查询命令将返回集群的所有节点。
6. 从节点上删除守护进程集的节点选择器所需标签，则由该守护进程集管理的Pod也会从节点上删除。
7. 可以通过spec.updateStrategy.type字段配置更新策略。当守护进程集的更新策略为RollingUpdate时，守护进程集中spec.template字段的任何改动都会触发滚动更新。
8. 控制守护进程集更新的参数有两个：
   1. spec.minReadySeconds：决定在滚动更新继续升级后续Pod之前，Pod必须进入“就绪”的时长。
   2. spec.updateStrategy.rollingUpdate.maxUnavailable：表明滚动更新可以同时更新多少个Pod。
9. 滚动更新开始之后，可以使用kubectl rollout命令查看守护进程集的当前状态。
10. 删除守护进程集会一并删除该守护进程集管理的所有Pod。将--cascade标志设置为false可以确保仅删除守护进程集，而不会删除相关的Pod。