## 第07章 服务发现

1. 服务发现工具可以查找哪些进程正在监听哪些服务地址。
2. 使用kubectl expose创建服务。
3. “kubernetes”这个服务是自动创建的，目的是方便你找到应用程序内的Kubernetes API并与之对话。
4. Kubernetes会为服务分配一个集群IP。这是一个特殊的IP地址，系统会通过这个IP针对该选择去标识的所有Pod实施负载均衡。
5. Kubernetes为集群中运行的Pod提供一个DNS服务。Kubernetes DNS会作为系统组件安装。
6. 完整的DNS名称：服务名称.命名空间.svc.集群的基础域名。其中集群的基础域名一般是默认设置值，管理员可以更改这个域名，从而实现跨集群时用唯一的DNS名称。
7. --watch选项可以让kubectl命令保持运行，并持续显示后续的输出。
8. NodePort会让系统选择一个端口（或由用户指定一个端口），然后集群中的每个节点都将流量转发到服务的这个端口上。使用NodePort的时候，你无需指定该服务在哪些Pod上运行。这个功能可以与硬件或软件负载均衡器集成，从而进一步公开服务。
9. 还可以在使用kubectl exposet创建服务时，指定--type=NodePort。
10. LoadBalancer实在NodePort类型之上构建的新类型，可以对云进行额外的配置，创建新的均衡器，并将其定向到集群中的节点上。
11. Endpoint会创建一个包含服务IP地址的端点。
12. kube-proxy通过API服务器监视集群中的新服务，它会在主机的内核中建立一套iptables规则，并通过这套规则改变数据包的目的地，将他们定向到该服务的一个端点上。如果服务的端点集发生变化，则iptables规则集将被重写。
13. 在服务创建的时候，通常集群IP本身是由API服务器分配的。但是，用户可以在创建服务的时候指定特定的集群IP。集群IP一经设置将无法修改，除非删除并重新创建服务对象。
14. Kubernetes服务的地址范围可以通过kube-apiserver可执行文件的--service-cluster-ip-range标志进行设置。服务地址范围不应与分配给每个Docker网桥或Kubernetes节点的IP子网和范围重叠。
15. 将Kubernetes连接到集群外部的旧资源时，你可以使用“无选择服务”来声明一个Kubernetes服务，并手动为其分配一个共集群外部使用的IP地址。